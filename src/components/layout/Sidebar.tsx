import React from 'react';
import { Link, useLocation } from 'react-router-dom';
import styles from './Sidebar.module.css';

interface NavItem {
  path: string;
  label: string;
  icon: React.ReactNode;
}

interface SidebarProps {
  isOpen?: boolean;
  onClose?: () => void;
}

// SVG icons for navigation items
const DashboardIcon = () => (
  <svg width="13" height="15" viewBox="0 0 13 15" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M4.50005 13.8333L4.50139 11.1653C4.50139 10.5446 4.50139 10.2346 4.60339 9.98996C4.6704 9.82808 4.76865 9.68099 4.89254 9.55711C5.01642 9.43322 5.16351 9.33497 5.32539 9.26796C5.57005 9.16663 5.88005 9.16663 6.50005 9.16663C7.12005 9.16663 7.43072 9.16663 7.67605 9.26796C7.83793 9.33497 7.98502 9.43322 8.1089 9.55711C8.23279 9.68099 8.33105 9.82808 8.39805 9.98996C8.50005 10.2353 8.50005 10.5453 8.50005 11.1666V13.8333" stroke="white" strokeLinecap="round" strokeLinejoin="round"/>
    <path d="M3.22539 2.34133L2.55872 2.862C1.54805 3.65133 1.04205 4.046 0.771387 4.602C0.500053 5.15867 0.500053 5.80133 0.500053 7.08667V8.48133C0.500053 11.004 0.500053 12.2653 1.28139 13.0493C2.06272 13.8333 3.31939 13.8333 5.83339 13.8333H7.16672C9.68072 13.8333 10.9381 13.8333 11.7187 13.0493C12.4994 12.2653 12.5001 11.004 12.5001 8.48067V7.08733C12.5001 5.80133 12.5001 5.15867 12.2287 4.602C11.9574 4.046 11.4521 3.65133 10.4414 2.862L9.77472 2.342C8.20139 1.11333 7.41472 0.5 6.50005 0.5C5.58539 0.5 4.79872 1.11333 3.22539 2.34133Z" stroke="white" strokeLinecap="round" strokeLinejoin="round"/>
  </svg>
);

const PerspectivesIcon = () => (
  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12.6667 6.00004V5.21204C12.6667 4.08337 12.6667 3.51871 12.4987 3.06804C12.3651 2.70987 12.156 2.38461 11.8857 2.1143C11.6154 1.84399 11.2902 1.63496 10.932 1.50137C10.4813 1.33337 9.91667 1.33337 8.788 1.33337C6.81267 1.33337 5.82467 1.33337 5.036 1.62737C4.40898 1.86107 3.83955 2.22687 3.36634 2.69997C2.89312 3.17307 2.52718 3.74241 2.29333 4.36937C2 5.15804 2 6.14604 2 8.12137V9.81804C2 11.8647 2 12.8874 2.532 13.598C2.68439 13.8016 2.86511 13.9823 3.06867 14.1347C3.77933 14.6667 4.802 14.6667 6.84867 14.6667H9.66667" stroke="#7B9FC3" strokeLinecap="round" strokeLinejoin="round"/>
    <path d="M7.33333 9.55537H7.89333C8.33467 9.55537 8.55533 9.55537 8.732 9.67204C8.90933 9.78804 9.008 9.99737 9.20533 10.4154L10.2667 12.6667L11.7333 8.00004L12.7947 10.2514C12.992 10.6694 13.0907 10.8787 13.268 10.9947C13.4453 11.1107 13.6653 11.1114 14.1067 11.1114H14.6667M2 8.00004C2 7.41073 2.2341 6.84556 2.65081 6.42885C3.06751 6.01214 3.63269 5.77804 4.222 5.77804H4.96267C5.30733 5.77804 5.47933 5.77804 5.62067 5.74004C5.80914 5.68932 5.98097 5.58994 6.11892 5.45187C6.25687 5.3138 6.3561 5.14189 6.40667 4.95337C6.44467 4.81204 6.44467 4.64004 6.44467 4.29537V3.55537C6.44467 2.96606 6.67877 2.40089 7.09548 1.98418C7.51218 1.56748 8.07736 1.33337 8.66667 1.33337" stroke="#7B9FC3" strokeLinecap="round" strokeLinejoin="round"/>
  </svg>
);

const TasksIcon = () => (
  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M1.33333 8C1.33333 5.17133 1.33333 3.75733 2.30933 2.87867C3.28667 2 4.85733 2 8 2C11.1427 2 12.714 2 13.69 2.87867C14.666 3.75733 14.6667 5.172 14.6667 8C14.6667 10.828 14.6667 12.2427 13.69 13.1213C12.7147 14 11.1427 14 8 14C4.85733 14 3.286 14 2.30933 13.1213C1.33267 12.2427 1.33333 10.828 1.33333 8Z" stroke="#7B9FC3" strokeLinecap="round" strokeLinejoin="round"/>
    <path d="M4 10.6667H6.66667M9.33333 5.33337H12M9.33333 8.00004H12M9.33333 10.6667H12M5.6 5.33337H5.06667C4.564 5.33337 4.31267 5.33337 4.156 5.48937C4 5.64671 4 5.89737 4 6.40004V6.93337C4 7.43604 4 7.68737 4.156 7.84404C4.31333 8.00004 4.564 8.00004 5.06667 8.00004H5.6C6.10267 8.00004 6.354 8.00004 6.51067 7.84404C6.66667 7.68671 6.66667 7.43604 6.66667 6.93337V6.40004C6.66667 5.89737 6.66667 5.64604 6.51067 5.48937C6.35333 5.33337 6.10267 5.33337 5.6 5.33337Z" stroke="#7B9FC3" strokeLinecap="round" strokeLinejoin="round"/>
  </svg>
);

const DocumentsIcon = () => (
  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2.33333 6.66671C2.33333 4.15271 2.33333 2.89537 3.16333 2.11471C3.99333 1.33404 5.32867 1.33337 8 1.33337H8.51533C10.6887 1.33337 11.7767 1.33337 12.5313 1.86537C12.7473 2.01737 12.9393 2.19871 13.1013 2.40204C13.6667 3.11271 13.6667 4.13537 13.6667 6.18204V7.87871C13.6667 9.85404 13.6667 10.842 13.354 11.6307C12.8513 12.8994 11.7887 13.8994 10.4407 14.3727C9.60267 14.6667 8.554 14.6667 6.454 14.6667C5.25533 14.6667 4.65533 14.6667 4.17667 14.4987C3.40667 14.228 2.79933 13.6567 2.512 12.932C2.33333 12.4814 2.33333 11.9167 2.33333 10.788V6.66671Z" stroke="#7B9FC3" strokeLinecap="round" strokeLinejoin="round"/>
    <path d="M13.6667 8.00008C13.6667 8.58939 13.4326 9.15457 13.0159 9.57127C12.5992 9.98798 12.034 10.2221 11.4447 10.2221C11.0007 10.2221 10.4773 10.1447 10.046 10.2601C9.85761 10.3107 9.68583 10.41 9.54789 10.548C9.40994 10.6859 9.31066 10.8577 9.26 11.0461C9.14467 11.4774 9.222 12.0007 9.222 12.4447C9.222 12.7365 9.16453 13.0255 9.05286 13.2951C8.94119 13.5647 8.77752 13.8096 8.57119 14.0159C8.36486 14.2223 8.11991 14.3859 7.85032 14.4976C7.58074 14.6093 7.2918 14.6667 7 14.6667M5.33333 4.66675H10M5.33333 7.33341H7.33333" stroke="#7B9FC3" strokeLinecap="round" strokeLinejoin="round"/>
  </svg>
);

const ReportsIcon = () => (
  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clipPath="url(#clip0_300_83)">
      <path d="M2.66667 10V12.6667M8 6.00001V12.6667M14.6667 14.6667H1.33333M13.3333 8.66668V12.6667" stroke="#7B9FC3" strokeLinecap="round" strokeLinejoin="round"/>
    </g>
  </svg>
);

const UsersIcon = () => (
  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 7.33333C10.7072 7.33333 11.3855 7.05238 11.8856 6.55229C12.3857 6.05219 12.6667 5.37391 12.6667 4.66667C12.6667 3.95942 12.3857 3.28115 11.8856 2.78105C11.3855 2.28095 10.7072 2 10 2M11.3333 9.33333C12.2174 9.33333 13.0652 9.68452 13.6904 10.3096C14.3155 10.9348 14.6667 11.7826 14.6667 12.6667C14.6667 13.0203 14.5262 13.3594 14.2761 13.6095C14.0261 13.8595 13.687 14 13.3333 14H12.3333M8.66667 4.66667C8.66667 5.37391 8.38571 6.05219 7.88562 6.55229C7.38552 7.05238 6.70724 7.33333 6 7.33333C5.29275 7.33333 4.61448 7.05238 4.11438 6.55229C3.61428 6.05219 3.33333 5.37391 3.33333 4.66667C3.33333 3.95942 3.61428 3.28115 4.11438 2.78105C4.61448 2.28095 5.29275 2 6 2C6.70724 2 7.38552 2.28095 7.88562 2.78105C8.38571 3.28115 8.66667 3.95942 8.66667 4.66667ZM7.33333 9.33333H4.66667C3.78261 9.33333 2.93476 9.68452 2.30964 10.3096C1.68452 10.9348 1.33333 11.7826 1.33333 12.6667C1.33333 13.0203 1.47381 13.3594 1.72386 13.6095C1.9739 13.8595 2.31304 14 2.66667 14H9.33333C9.68695 14 10.0261 13.8595 10.2761 13.6095C10.5262 13.3594 10.6667 13.0203 10.6667 12.6667C10.6667 11.7826 10.3155 10.9348 9.69035 10.3096C9.06523 9.68452 8.21739 9.33333 7.33333 9.33333Z" stroke="#7B9FC3" strokeLinecap="round" strokeLinejoin="round"/>
  </svg>
);

const navItems: NavItem[] = [
  { 
    path: '/', 
    label: 'Dashboard', 
    icon: <DashboardIcon />
  },
  { 
    path: '/perspectives',
    label: 'Perspectives',
    icon: <PerspectivesIcon />
  },
  { 
    path: '/tasks',
    label: 'Tasks',
    icon: <TasksIcon />
  },
  { 
    path: '/documents',
    label: 'Documents',
    icon: <DocumentsIcon />
  },
  { 
    path: '/reports',
    label: 'Reports',
    icon: <ReportsIcon />
  },
  { 
    path: '/users',
    label: 'Users & Roles',
    icon: <UsersIcon />
  },
];

export const Sidebar: React.FC<SidebarProps> = ({ isOpen = false, onClose }) => {
  const location = useLocation();

  return (
    <>
      {/* Mobile overlay */}
      {isOpen && <div className={styles.overlay} onClick={onClose} />}
      {/* Sidebar */}
      <aside className={`${styles.sidebar} ${isOpen ? styles.sidebarOpen : ''}`}>
        <div className={styles.header}>
          <div className={styles.logo}>
            <span style={{ fontSize: '18px', fontWeight: 'bold' }}>Tahwul</span>
          </div>
        </div>
        <nav className={styles.nav}>
          <ul className={styles.navList}>
            {navItems.map(item => {
              const isActive = location.pathname === item.path;
              return (
                <li key={item.path} className={styles.navItem}>
                  <Link
                    to={item.path}
                    className={`${styles.navLink} ${isActive ? styles.navLinkActive : ''}`}
                    onClick={onClose}
                  >
                    <span className={styles.icon}>{item.icon}</span>
                    <span className={styles.label}>{item.label}</span>
                  </Link>
                </li>
              );
            })}
          </ul>
        </nav>
      </aside>
    </>
  );
};
